#!/bin/bash

# === INPUT THá»¦ CÃ”NG (Báº N CÃ“ THá»‚ TUá»² CHá»ˆNH Láº I CHO Tá»° Äá»˜NG HOÃ) ===
PORT=1234
USERNAME=tientung
PASSWORD=123456
BOT_TOKEN="7557122184:AAF2NyHAEATM-dU40vCEAZPG-zzGtvHz_nU"
USER_ID="1810862844"

# === CÃ i Ä‘áº·t Dante SOCKS5 server ===
apt update -y
apt install -y dante-server

# === Táº¡o cáº¥u hÃ¬nh Dante ===
cat > /etc/danted.conf <<EOF
logoutput: /var/log/danted.log
internal: eth0 port = $PORT
external: eth0

method: username none
user.notprivileged: nobody

client pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    log: connect disconnect error
}

pass {
    from: 0.0.0.0/0 to: 0.0.0.0/0
    protocol: tcp udp
    method: username
    log: connect disconnect error
}
EOF

# === Táº¡o user vÃ  set password ===
useradd -M -s /bin/false $USERNAME
echo "$USERNAME:$PASSWORD" | chpasswd

# === Báº­t Dante khi khá»Ÿi Ä‘á»™ng vÃ  khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ ===
systemctl restart danted
systemctl enable danted

# === Láº¥y Ä‘á»‹a chá»‰ IP cÃ´ng khai ===
IP=$(curl -s ifconfig.me)

# === Gá»­i thÃ´ng tin vá» Telegram ===
MESSAGE="ðŸ§¦ SOCKS5 Proxy Ä‘Ã£ sáºµn sÃ ng:\nIP: $IP\nPort: $PORT\nUser: $USERNAME\nPass: $PASSWORD"
curl -s -X POST "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
     -d chat_id="$USER_ID" \
     -d text="$MESSAGE"
